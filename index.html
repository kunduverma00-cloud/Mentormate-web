<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MentorMate - Advanced Learning Management System</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Firebase Connection Status -->
    <div id="firebaseStatus" class="firebase-status">
        <div class="status-dot"></div>
        <span class="status-text">Firebase Disconnected</span>
    </div>

    <!-- Role Selection Screen -->
    <div id="roleSelectionScreen" class="screen active">
        <div class="welcome-container">
            <div class="welcome-header">
                <h1>ğŸ“ MentorMate</h1>
                <p>Advanced Learning Management System</p>
            </div>

            <div class="role-cards">
                <div class="role-card" onclick="selectRole('student')">
                    <div class="role-icon">ğŸ‘¨â€ğŸ“</div>
                    <h3>Student Dashboard</h3>
                    <p>Check-in to routines, take tests, track progress</p>
                </div>

                <div class="role-card" onclick="selectRole('mentor')">
                    <div class="role-icon">ğŸ‘¨â€ğŸ«</div>
                    <h3>Mentor Panel</h3>
                    <p>Create tests, monitor students, view analytics</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mentor Login Screen -->
    <div id="mentorLoginScreen" class="screen">
        <div class="login-container">
            <div class="login-card">
                <h2>ğŸ‘¨â€ğŸ« Mentor Access</h2>
                <p>Enter password to access mentor panel</p>

                <div class="form-group">
                    <input 
                        type="password" 
                        id="mentorPasswordInput" 
                        placeholder="Enter mentor password"
                        onkeypress="handlePasswordKeypress(event)"
                        class="form-input"
                    >
                </div>

                <button onclick="verifyMentorPassword()" class="btn btn-primary btn-full">
                    ğŸ”“ Access Mentor Panel
                </button>

                <div id="passwordError" class="error-message"></div>

                <div class="login-footer">
                    <button onclick="backToRoleSelection()" class="btn btn-secondary">
                        â† Back to Role Selection
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="studentDashboard" class="screen">
        <div class="dashboard-container">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="container">
                    <div class="header-content">
                        <h1>ğŸ‘¨â€ğŸ“ Student Dashboard</h1>
                        <div class="header-info">
                            <div class="current-time">ğŸ•’ <span id="studentTime">00:00:00</span></div>
                            <button onclick="backToRoleSelection()" class="btn btn-secondary btn-small">
                                ğŸšª Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content -->
            <div class="dashboard-content">
                <div class="container">
                    <!-- Navigation Tabs -->
                    <div class="section-tabs">
                        <button class="tab-btn active" onclick="showSection('routines')">
                            ğŸ“š Daily Routines
                        </button>
                        <button class="tab-btn" onclick="showSection('tests')">
                            ğŸ“ Tests
                        </button>
                        <button class="tab-btn" onclick="showSection('syllabus')">
                            ğŸ“– NEET Syllabus
                        </button>
                        <button class="tab-btn" onclick="showSection('progress')">
                            ğŸ“Š Progress
                        </button>
                    </div>

                    <!-- Routines Section -->
                    <div id="routinesSection" class="content-section active">
                        <!-- Today's Points Display -->
                        <div class="points-grid">
                            <div class="points-card">
                                <div class="points-info">
                                    <h3>Today's Points</h3>
                                    <div class="points-value" id="todayPoints">0</div>
                                </div>
                            </div>
                            <div class="points-card secondary">
                                <div class="points-info">
                                    <h3>Yesterday's Points</h3>
                                    <div class="points-value" id="yesterdayPoints">0</div>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h2>ğŸ“š Daily Routines</h2>
                            <div id="studentRoutines" class="routines-grid">
                                <!-- Student routines will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Tests Section -->
                    <div id="testsSection" class="content-section">
                        <div class="section">
                            <h2>ğŸ“ Available Tests</h2>
                            <div id="availableTests" class="tests-grid">
                                <!-- Available tests will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- NEET Syllabus Section - NEW ADDITION -->
                    <div id="syllabusSection" class="content-section">
                        <div class="section">
                            <h2>ğŸ“– NEET Syllabus Progress</h2>
                            <div id="syllabusContainer" class="syllabus-container">
                                <!-- NEET Syllabus will render here -->
                            </div>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div id="progressSection" class="content-section">
                        <div class="progress-stats">
                            <div class="stat-card">
                                <div class="stat-value" id="totalRoutines">0</div>
                                <div class="stat-label">Total Routines</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completedRoutines">0</div>
                                <div class="stat-label">Completed Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completedTests">0</div>
                                <div class="stat-label">Tests Taken</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="activePunishments">0</div>
                                <div class="stat-label">Active Punishments</div>
                            </div>
                        </div>

                        <div class="section">
                            <h2>ğŸ“Š Progress & Activity</h2>

                            <!-- Daily Points Breakdown -->
                            <div class="daily-points-breakdown">
                                <div class="points-history-card">
                                    <div class="points-day">Today</div>
                                    <div class="points-amount" id="todayPoints">0</div>
                                </div>
                                <div class="points-history-card">
                                    <div class="points-day">Yesterday</div>
                                    <div class="points-amount" id="yesterdayPointsHistory">0</div>
                                </div>
                            </div>

                            <div id="studentActivity" class="activity-section">
                                <!-- Student activity will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mentor Dashboard -->
    <div id="mentorDashboard" class="screen">
        <div class="dashboard-container">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="container">
                    <div class="header-content">
                        <h1>ğŸ‘¨â€ğŸ« Mentor Dashboard</h1>
                        <div class="header-info">
                            <div class="current-time">ğŸ•’ <span id="mentorTime">00:00:00</span></div>
                            <button onclick="backToRoleSelection()" class="btn btn-secondary btn-small">
                                ğŸšª Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content -->
            <div class="dashboard-content">
                <div class="container">
                    <!-- Navigation Tabs -->
                    <div class="section-tabs">
                        <button class="tab-btn active" onclick="showMentorSection('overview')">
                            ğŸ“Š Overview
                        </button>
                        <button class="tab-btn" onclick="showMentorSection('routines')">
                            ğŸ“š Routines
                        </button>
                        <button class="tab-btn" onclick="showMentorSection('tests')">
                            ğŸ“ Tests
                        </button>
                        <button class="tab-btn" onclick="showMentorSection('syllabus')">
                            ğŸ“– NEET Syllabus
                        </button>
                        <button class="tab-btn" onclick="showMentorSection('punishments')">
                            âš ï¸ Punishments
                        </button>
                    </div>

                    <!-- Overview Section -->
                    <div id="mentorOverviewSection" class="content-section active">
                        <div class="section">
                            <h2>ğŸ“Š Student Overview</h2>

                            <div class="action-cards">
                                <div class="action-card" onclick="showCreateTestModal()">
                                    <div class="action-icon">ğŸ“</div>
                                    <h3>Design new assessments</h3>
                                    <p>Create custom tests and quizzes</p>
                                </div>

                                <div class="action-card" onclick="showAddRoutineModal()">
                                    <div class="action-icon">ğŸ“š</div>
                                    <h3>Schedule new activities</h3>
                                    <p>Add daily routines and goals</p>
                                </div>

                                <div class="action-card" onclick="viewAnalytics()">
                                    <div class="action-icon">ğŸ“Š</div>
                                    <h3>View student performance</h3>
                                    <p>Analyze progress and trends</p>
                                </div>
                            </div>

                            <div id="activityFeed" class="activity-feed">
                                <!-- Activity feed will be rendered here -->
                            </div>
                        </div>

                        <!-- Notifications -->
                        <div class="section">
                            <h3>ğŸ”” Notifications <span id="notificationCount" class="notification-badge">0 new alerts</span></h3>
                            <div id="mentorNotifications" class="notifications-container">
                                <!-- Notifications will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Routines Management Section -->
                    <div id="mentorRoutinesSection" class="content-section">
                        <div class="section">
                            <h2>ğŸ“š Routine Management</h2>
                            <button onclick="showAddRoutineModal()" class="btn btn-primary">â• Add Routine</button>
                            <div id="routineManager" class="routines-grid">
                                <!-- Routine management will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Tests Management Section -->
                    <div id="mentorTestsSection" class="content-section">
                        <div class="section">
                            <h2>ğŸ“ Test Management</h2>
                            <button onclick="showCreateTestModal()" class="btn btn-primary">â• Create Test</button>
                            <div id="testManager" class="tests-grid">
                                <!-- Test management will be rendered here -->
                            </div>
                        </div>

                        <div class="section">
                            <h3>ğŸ“Š Test Reports</h3>
                            <div id="testReports" class="test-reports">
                                <!-- Test reports will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- NEET Syllabus Management Section - NEW ADDITION -->
                    <div id="mentorSyllabusSection" class="content-section">
                        <div class="section">
                            <h2>ğŸ“– NEET Syllabus Management</h2>
                            <div id="mentorSyllabusContainer" class="mentor-syllabus-container">
                                <!-- Mentor syllabus management will render here -->
                            </div>
                        </div>
                    </div>

                    <!-- Punishments Section -->
                    <div id="mentorPunishmentsSection" class="content-section">
                        <div class="section">
                            <h2>âš ï¸ Student Punishments</h2>
                            <div class="punishments-content">
                                <div id="punishmentsList" class="student-punishments">
                                    <!-- Punishments will be rendered here -->
                                </div>

                                <!-- Punishment Rules Info -->
                                <div class="rule-info-card">
                                    <h4>ğŸ“‹ Punishment Rules</h4>
                                    <ul>
                                        <li>0-5 minutes late: No punishment</li>
                                        <li>6-15 minutes late: -1 point deduction</li>
                                        <li>16-30 minutes late: -3 points deduction</li>
                                        <li>31+ minutes late: -5 points + 30 min study punishment</li>
                                    </ul>
                                    <em>*These rules are automatically applied when students check in late.*</em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Routine Modal -->
    <div id="addRoutineModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="routineModalTitle">Add New Routine</h3>
                <button onclick="closeModal('addRoutineModal')" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Routine Name</label>
                    <input type="text" id="routineName" placeholder="Enter routine name">
                </div>
                <div class="form-group">
                    <label>Time</label>
                    <input type="time" id="routineTime">
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="routineDuration" value="30" min="15" max="480">
                </div>
                <div class="form-group">
                    <label>Points</label>
                    <input type="number" id="routinePoints" value="10" min="1" max="100">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="routineCategory">
                        <option value="Health">Health</option>
                        <option value="Education">Education</option>
                        <option value="Skills">Skills</option>
                        <option value="Personal">Personal</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('addRoutineModal')" class="btn btn-secondary">Cancel</button>
                <button onclick="saveRoutine()" class="btn btn-primary">Save Routine</button>
            </div>
        </div>
    </div>

    <!-- Create Test Modal -->
    <div id="createTestModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>ğŸ“ Create New Test</h3>
                <button onclick="closeModal('createTestModal')" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Test Title</label>
                    <input type="text" id="testTitle" placeholder="Enter test title">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="testCategory">
                        <option value="Academic">Academic</option>
                        <option value="Skills">Skills</option>
                        <option value="General">General</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="testDuration" value="30" min="5" max="180">
                </div>
                <div class="form-group">
                    <label>Questions (JSON Format)</label>
                    <textarea id="testQuestions" rows="10" placeholder="Enter questions in JSON format...">
[
  {
    "question": "What is the capital of France?",
    "options": ["London", "Berlin", "Paris", "Madrid"],
    "correctAnswer": 2
  }
]</textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('createTestModal')" class="btn btn-secondary">Cancel</button>
                <button onclick="saveTest()" class="btn btn-primary">Create Test</button>
            </div>
        </div>
    </div>

    <!-- Test Taking Modal -->
    <div id="testModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="testModalTitle">Taking Test</h3>
                <div class="test-timer" id="testTimer">30:00</div>
            </div>
            <div class="modal-body">
                <div class="test-progress" id="testProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="testProgressFill"></div>
                    </div>
                    <div class="progress-text" id="testProgressText">Question 1 of 5</div>
                </div>

                <div id="testQuestionContainer">
                    <!-- Test question will be rendered here -->
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="endTest()" class="btn btn-danger">End Test</button>
                <div class="test-navigation">
                    <button onclick="previousQuestion()" id="prevQuestionBtn" class="btn btn-secondary">â† Previous</button>
                    <button onclick="nextQuestion()" id="nextQuestionBtn" class="btn btn-primary">Next â†’</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>