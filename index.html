<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MentorMate - Learning Management System</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Firebase Connection Status -->
    <div id="firebaseStatus" class="firebase-status">
        <span class="status-dot"></span>
        <span class="status-text">Connecting...</span>
    </div>

    <!-- Role Selection Screen -->
    <div id="roleSelectionScreen" class="screen active">
        <div class="container">
            <div class="welcome-header">
                <h1>ğŸ“ MentorMate</h1>
                <p>Advanced Learning Management System</p>
            </div>
            <div class="role-cards">
                <div class="role-card" onclick="selectRole('student')">
                    <div class="role-icon">ğŸ‘¨â€ğŸ“</div>
                    <h3>Student Dashboard</h3>
                    <p>Check-in to routines, take tests, track progress</p>
                </div>
                <div class="role-card" onclick="selectRole('mentor')">
                    <div class="role-icon">ğŸ‘¨â€ğŸ«</div>
                    <h3>Mentor Panel</h3>
                    <p>Create tests, monitor students, view analytics</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mentor Login Screen -->
    <div id="mentorLoginScreen" class="screen">
        <div class="container">
            <div class="login-card">
                <h2>ğŸ” Mentor Access</h2>
                <p>Enter password to access mentor panel</p>
                <div class="form-group">
                    <input type="password" id="mentorPasswordInput" class="form-input" placeholder="Enter mentor password" onkeypress="handlePasswordKeypress(event)">
                    <div id="passwordError" class="error-message"></div>
                </div>
                <div class="button-group">
                    <button onclick="verifyMentorPassword()" class="btn btn-primary">Login</button>
                    <button onclick="backToRoleSelection()" class="btn btn-secondary">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="studentDashboard" class="screen">
        <div class="dashboard-header">
            <div class="container">
                <div class="header-content">
                    <h1>ğŸ‘¨â€ğŸ“ Student Dashboard</h1>
                    <div class="header-info">
                        <span class="current-time" id="studentTime"></span>
                        <button onclick="backToRoleSelection()" class="btn btn-outline">Logout</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="container">
                <!-- Points Display -->
                <div class="points-card">
                    <div class="points-info">
                        <h3>Total Points</h3>
                        <div class="points-value" id="studentPoints">0</div>
                    </div>
                </div>

                <!-- Today's Routines -->
                <div class="section">
                    <h2>ğŸƒ Today's Routines</h2>
                    <div id="studentRoutines" class="routines-grid">
                        <!-- Routines will be populated here -->
                    </div>
                </div>

                <!-- Available Tests -->
                <div class="section">
                    <h2>ğŸ“‹ Available Tests</h2>
                    <div id="availableTests" class="tests-grid">
                        <!-- Tests will be populated here -->
                    </div>
                </div>

                <!-- Progress Overview -->
                <div class="section">
                    <h2>ğŸ“ˆ My Progress</h2>
                    <div class="progress-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="completedRoutines">0</div>
                            <div class="stat-label">Completed Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="testsTaken">0</div>
                            <div class="stat-label">Tests Taken</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="averageScore">0%</div>
                            <div class="stat-label">Average Score</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mentor Dashboard -->
    <div id="mentorDashboard" class="screen">
        <div class="dashboard-header">
            <div class="container">
                <div class="header-content">
                    <h1>Mentor Control Panel</h1>
                    <div class="header-info">
                        <span class="current-time" id="mentorTime"></span>
                        <button onclick="backToRoleSelection()" class="btn btn-outline">Logout</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="container">
                <!-- Quick Actions -->
                <div class="action-cards">
                    <div class="action-card" onclick="showCreateTestModal()">
                        <div class="action-icon">ğŸ“</div>
                        <h3>Create Test</h3>
                        <p>Design new assessments</p>
                    </div>
                    <div class="action-card" onclick="showAddRoutineModal()">
                        <div class="action-icon">ğŸ“…</div>
                        <h3>Add Routine</h3>
                        <p>Schedule new activities</p>
                    </div>
                    <div class="action-card" onclick="showStudentAnalytics()">
                        <div class="action-icon">ğŸ“Š</div>
                        <h3>Analytics</h3>
                        <p>View student performance</p>
                    </div>
                    <div class="action-card" onclick="showNotifications()">
                        <div class="action-icon">ğŸ””</div>
                        <h3>Notifications</h3>
                        <p id="notificationCount">0 new alerts</p>
                    </div>
                </div>

                <!-- Student Test Reports -->
                <div class="section">
                    <h2>ğŸ“„ Student Test Reports</h2>
                    <div id="testReports" class="reports-grid">
                        <!-- Test reports will be populated here -->
                    </div>
                </div>

                <!-- Student Activity Feed -->
                <div class="section">
                    <h2>ğŸ“‹ Recent Activity</h2>
                    <div id="activityFeed" class="activity-feed">
                        <!-- Activity feed will be populated here -->
                    </div>
                </div>

                <!-- Routine Management -->
                <div class="section">
                    <h2>âš™ï¸ Manage Routines</h2>
                    <div id="routineManager" class="routine-manager">
                        <!-- Routine management will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Create Test Modal -->
    <div id="createTestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“ Create New Test</h3>
                <button onclick="closeModal('createTestModal')" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Test Title</label>
                    <input type="text" id="testTitle" class="form-input" placeholder="e.g., Weekly Math Assessment">
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="testDuration" class="form-input" value="30" min="5" max="180">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="testCategory" class="form-input">
                        <option value="Academic">Academic</option>
                        <option value="General Knowledge">General Knowledge</option>
                        <option value="Practice">Practice</option>
                    </select>
                </div>
                <div class="questions-section">
                    <div class="section-header">
                        <h4>Questions</h4>
                        <button onclick="addQuestion()" class="btn btn-small">+ Add Question</button>
                    </div>
                    <div id="questionsContainer">
                        <!-- Questions will be added here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveTest()" class="btn btn-primary">Create Test</button>
                <button onclick="closeModal('createTestModal')" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Routine Modal -->
    <div id="addRoutineModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“… Add New Routine</h3>
                <button onclick="closeModal('addRoutineModal')" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Routine Name</label>
                    <input type="text" id="routineName" class="form-input" placeholder="e.g., Morning Exercise">
                </div>
                <div class="form-group">
                    <label>Start Time</label>
                    <input type="time" id="routineStartTime" class="form-input">
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="routineDuration" class="form-input" value="30" min="5">
                </div>
                <div class="form-group">
                    <label>Points</label>
                    <input type="number" id="routinePoints" class="form-input" value="10" min="1">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="routineCategory" class="form-input">
                        <option value="Health">Health</option>
                        <option value="Education">Education</option>
                        <option value="Personal">Personal</option>
                        <option value="Recreation">Recreation</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveRoutine()" class="btn btn-primary">Add Routine</button>
                <button onclick="closeModal('addRoutineModal')" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Routine Modal -->
    <div id="editRoutineModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âœï¸ Edit Routine</h3>
                <button onclick="closeModal('editRoutineModal')" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Routine Name</label>
                    <input type="text" id="editRoutineName" class="form-input" placeholder="e.g., Morning Exercise">
                </div>
                <div class="form-group">
                    <label>Start Time</label>
                    <input type="time" id="editRoutineStartTime" class="form-input">
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="editRoutineDuration" class="form-input" value="30" min="5">
                </div>
                <div class="form-group">
                    <label>Points</label>
                    <input type="number" id="editRoutinePoints" class="form-input" value="10" min="1">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="editRoutineCategory" class="form-input">
                        <option value="Health">Health</option>
                        <option value="Education">Education</option>
                        <option value="Personal">Personal</option>
                        <option value="Recreation">Recreation</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="updateRoutine()" class="btn btn-primary">Update Routine</button>
                <button onclick="closeModal('editRoutineModal')" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>